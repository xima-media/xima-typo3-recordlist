{namespace be=TYPO3\CMS\Backend\ViewHelpers}

<f:be.pageRenderer includeRequireJsModules="{0: 'TYPO3/CMS/Backend/Tooltip', 1:'TYPO3/CMS/Workspaces/Backend', 2: 'TYPO3/CMS/XimaTypo3Recordlist/Recordlist'}" />

<f:render section="Headline" optional="true">
	<h1>{recordCount} Records</h1>
</f:render>


<div id="workspace-settings-form">
	<input type="hidden" name="depth" value="9" /> <input type="hidden" name="languages" value="all" />
	<input type="hidden" name="stage" value="-99" />
</div>

<f:form>

	<div id="searchInputs" class="mb-5 {f:if(condition:isPostRequest, else:'hidden')}">

		<f:form.hidden name="order_field" value="{order_field}" />
		<f:form.hidden name="order_direction" value="{order_direction}" />

		<div class="row mb-3">
			<div class="col-6">
				<f:render partial="Filter/SearchField" arguments="{_all}" />
			</div>
		</div>

		<f:render section="SearchInputs" optional="true" />

	</div>

	<main class="recordlist"
		  data-workspace-switch-action="{workspaceSwitched -> f:format.raw()}"
		  id="workspace-content-wrapper">

		<table class="table table-striped table-hover mb-0">
			<thead>
			<tr>
				<f:for each="{tableConfiguration.columns}" as="colConfig">
					<f:render partial="Th" arguments="{_all}" />
				</f:for>
				<f:if condition="{tableConfiguration.groupActions} || {tableConfiguration.actions}">
					<th>Actions</th>
				</f:if>
			</tr>
			</thead>
			<tbody>
			<f:render partial="PaginationRow" arguments="{_all}" />
			<f:for each="{records}" as="item">
				<tr data-uid="{item.uid}"
					data-pid="{item.pid}"
					data-t3ver_oid="{item.t3ver_oid}"
					data-t3ver_wsid="1"
					data-stage="{item.t3ver_stage}"
					data-table="{table}"
					data-next-stage="{f:if(condition:'{item.t3ver_stage}===-10', then: '-20', else: '-10')}">

					<f:for each="{tableConfiguration.columns}" as="colConfig">
						<td>
							<f:render partial="Columns/{colConfig.partial}" arguments="{_all}" />
						</td>
					</f:for>

					<f:if condition="{tableConfiguration.groupActions} || {tableConfiguration.actions}">
						<td>
							<f:if condition="{tableConfiguration.groupActions}">
								<div class="btn-group">
									<f:for each="{tableConfiguration.groupActions}" as="actionName">
										<f:render partial="Actions/{actionName}" arguments="{_all}" />
									</f:for>
								</div>
							</f:if>
							<f:if condition="{tableConfiguration.actions}">
								<f:for each="{tableConfiguration.actions}" as="actionName">
									<f:render partial="Actions/{actionName}" arguments="{_all}" />
								</f:for>
							</f:if>
						</td>
					</f:if>
				</tr>
			</f:for>
			<f:render partial="PaginationRow" arguments="{_all}" />
			</tbody>
		</table>
	</main>
</f:form>
