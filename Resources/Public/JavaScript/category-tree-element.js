var ft=Object.create;var ue=Object.defineProperty;var gt=Object.getOwnPropertyDescriptor;var ke=(r,e)=>(e=Symbol[r])?e:Symbol.for("Symbol."+r),U=r=>{throw TypeError(r)};var _t=(r,e,t)=>e in r?ue(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ue=(r,e)=>ue(r,"name",{value:e,configurable:!0});var z=r=>[,,,ft(r?.[ke("metadata")]??null)],De=["class","method","getter","setter","accessor","field","value","get","set"],M=r=>r!==void 0&&typeof r!="function"?U("Function expected"):r,$t=(r,e,t,o,s)=>({kind:De[r],name:e,metadata:o,addInitializer:i=>t._?U("Already initialized"):s.push(M(i||null))}),yt=(r,e)=>_t(e,ke("metadata"),r[3]),F=(r,e,t,o)=>{for(var s=0,i=r[e>>1],n=i&&i.length;s<n;s++)e&1?i[s].call(t):o=i[s].call(t,o);return o},Y=(r,e,t,o,s,i)=>{var n,l,a,c,h,d=e&7,m=!!(e&8),u=!!(e&16),A=d>3?r.length+1:d?m?1:2:0,Oe=De[d+5],Me=d>3&&(r[A-1]=[]),mt=r[A]||(r[A]=[]),g=d&&(!u&&!m&&(s=s.prototype),d<5&&(d>3||!u)&&gt(d<4?s:{get[t](){return Re(this,i)},set[t](f){return Ie(this,i,f)}},t));d?u&&d<4&&Ue(i,(d>2?"set ":d>1?"get ":"")+t):Ue(s,t);for(var he=o.length-1;he>=0;he--)c=$t(d,t,a={},r[3],mt),d&&(c.static=m,c.private=u,h=c.access={has:u?f=>vt(s,f):f=>t in f},d^3&&(h.get=u?f=>(d^1?Re:At)(f,s,d^4?i:g.get):f=>f[t]),d>2&&(h.set=u?(f,pe)=>Ie(f,s,pe,d^4?i:g.set):(f,pe)=>f[t]=pe)),l=(0,o[he])(d?d<4?u?i:g[Oe]:d>4?void 0:{get:g.get,set:g.set}:s,c),a._=1,d^4||l===void 0?M(l)&&(d>4?Me.unshift(l):d?u?i=l:g[Oe]=l:s=l):typeof l!="object"||l===null?U("Object expected"):(M(n=l.get)&&(g.get=n),M(n=l.set)&&(g.set=n),M(n=l.init)&&Me.unshift(n));return d||yt(r,s),g&&ue(s,t,g),u?d^4?i:g:s};var me=(r,e,t)=>e.has(r)||U("Cannot "+t),vt=(r,e)=>Object(e)!==e?U('Cannot use the "in" operator on this value'):r.has(e),Re=(r,e,t)=>(me(r,e,"read from private field"),t?t.call(r):e.get(r));var Ie=(r,e,t,o)=>(me(r,e,"write to private field"),o?o.call(r,t):e.set(r,t),t),At=(r,e,t)=>(me(r,e,"access private method"),t);var W=globalThis,K=W.ShadowRoot&&(W.ShadyCSS===void 0||W.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Le=Symbol(),He=new WeakMap,V=class{constructor(e,t,o){if(this._$cssResult$=!0,o!==Le)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(K&&e===void 0){let o=t!==void 0&&t.length===1;o&&(e=He.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&He.set(t,e))}return e}toString(){return this.cssText}},je=r=>new V(typeof r=="string"?r:r+"",void 0,Le);var qe=(r,e)=>{if(K)r.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(let t of e){let o=document.createElement("style"),s=W.litNonce;s!==void 0&&o.setAttribute("nonce",s),o.textContent=t.cssText,r.appendChild(o)}},fe=K?r=>r:r=>r instanceof CSSStyleSheet?(e=>{let t="";for(let o of e.cssRules)t+=o.cssText;return je(t)})(r):r;var{is:bt,defineProperty:Et,getOwnPropertyDescriptor:Ct,getOwnPropertyNames:Tt,getOwnPropertySymbols:Pt,getPrototypeOf:wt}=Object,Z=globalThis,Be=Z.trustedTypes,Nt=Be?Be.emptyScript:"",St=Z.reactiveElementPolyfillSupport,R=(r,e)=>r,X={toAttribute(r,e){switch(e){case Boolean:r=r?Nt:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,e){let t=r;switch(e){case Boolean:t=r!==null;break;case Number:t=r===null?null:Number(r);break;case Object:case Array:try{t=JSON.parse(r)}catch{t=null}}return t}},ge=(r,e)=>!bt(r,e),ze={attribute:!0,type:String,converter:X,reflect:!1,useDefault:!1,hasChanged:ge};Symbol.metadata??=Symbol("metadata"),Z.litPropertyMetadata??=new WeakMap;var y=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=ze){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){let o=Symbol(),s=this.getPropertyDescriptor(e,o,t);s!==void 0&&Et(this.prototype,e,s)}}static getPropertyDescriptor(e,t,o){let{get:s,set:i}=Ct(this.prototype,e)??{get(){return this[t]},set(n){this[t]=n}};return{get:s,set(n){let l=s?.call(this);i?.call(this,n),this.requestUpdate(e,l,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ze}static _$Ei(){if(this.hasOwnProperty(R("elementProperties")))return;let e=wt(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(R("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(R("properties"))){let t=this.properties,o=[...Tt(t),...Pt(t)];for(let s of o)this.createProperty(s,t[s])}let e=this[Symbol.metadata];if(e!==null){let t=litPropertyMetadata.get(e);if(t!==void 0)for(let[o,s]of t)this.elementProperties.set(o,s)}this._$Eh=new Map;for(let[t,o]of this.elementProperties){let s=this._$Eu(t,o);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let o=new Set(e.flat(1/0).reverse());for(let s of o)t.unshift(fe(s))}else e!==void 0&&t.push(fe(e));return t}static _$Eu(e,t){let o=t.attribute;return o===!1?void 0:typeof o=="string"?o:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,t=this.constructor.elementProperties;for(let o of t.keys())this.hasOwnProperty(o)&&(e.set(o,this[o]),delete this[o]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return qe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$ET(e,t){let o=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,o);if(s!==void 0&&o.reflect===!0){let i=(o.converter?.toAttribute!==void 0?o.converter:X).toAttribute(t,o.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,t){let o=this.constructor,s=o._$Eh.get(e);if(s!==void 0&&this._$Em!==s){let i=o.getPropertyOptions(s),n=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:X;this._$Em=s;let l=n.fromAttribute(t,i.type);this[s]=l??this._$Ej?.get(s)??l,this._$Em=null}}requestUpdate(e,t,o){if(e!==void 0){let s=this.constructor,i=this[e];if(o??=s.getPropertyOptions(e),!((o.hasChanged??ge)(i,t)||o.useDefault&&o.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,o))))return;this.C(e,t,o)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:o,reflect:s,wrapped:i},n){o&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,n??t??this[e]),i!==!0||n!==void 0)||(this._$AL.has(e)||(this.hasUpdated||o||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}let o=this.constructor.elementProperties;if(o.size>0)for(let[s,i]of o){let{wrapped:n}=i,l=this[s];n!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,i,l)}}let e=!1,t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((o=>o.hostUpdate?.())),this.update(t)):this._$EM()}catch(o){throw e=!1,this._$EM(),o}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};y.elementStyles=[],y.shadowRootOptions={mode:"open"},y[R("elementProperties")]=new Map,y[R("finalized")]=new Map,St?.({ReactiveElement:y}),(Z.reactiveElementVersions??=[]).push("2.1.1");var $e=globalThis,J=$e.trustedTypes,Fe=J?J.createPolicy("lit-html",{createHTML:r=>r}):void 0,ye="$lit$",v=`lit$${Math.random().toFixed(9).slice(2)}$`,ve="?"+v,xt=`<${ve}>`,T=document,k=()=>T.createComment(""),D=r=>r===null||typeof r!="object"&&typeof r!="function",Ae=Array.isArray,Ze=r=>Ae(r)||typeof r?.[Symbol.iterator]=="function",_e=`[ 	
\f\r]`,I=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ye=/-->/g,We=/>/g,E=RegExp(`>|${_e}(?:([^\\s"'>=/]+)(${_e}*=${_e}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ve=/'/g,Ke=/"/g,Je=/^(?:script|style|textarea|title)$/i,be=r=>(e,...t)=>({_$litType$:r,strings:e,values:t}),S=be(1),Jt=be(2),Gt=be(3),$=Symbol.for("lit-noChange"),p=Symbol.for("lit-nothing"),Xe=new WeakMap,C=T.createTreeWalker(T,129);function Ge(r,e){if(!Ae(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return Fe!==void 0?Fe.createHTML(e):e}var Qe=(r,e)=>{let t=r.length-1,o=[],s,i=e===2?"<svg>":e===3?"<math>":"",n=I;for(let l=0;l<t;l++){let a=r[l],c,h,d=-1,m=0;for(;m<a.length&&(n.lastIndex=m,h=n.exec(a),h!==null);)m=n.lastIndex,n===I?h[1]==="!--"?n=Ye:h[1]!==void 0?n=We:h[2]!==void 0?(Je.test(h[2])&&(s=RegExp("</"+h[2],"g")),n=E):h[3]!==void 0&&(n=E):n===E?h[0]===">"?(n=s??I,d=-1):h[1]===void 0?d=-2:(d=n.lastIndex-h[2].length,c=h[1],n=h[3]===void 0?E:h[3]==='"'?Ke:Ve):n===Ke||n===Ve?n=E:n===Ye||n===We?n=I:(n=E,s=void 0);let u=n===E&&r[l+1].startsWith("/>")?" ":"";i+=n===I?a+xt:d>=0?(o.push(c),a.slice(0,d)+ye+a.slice(d)+v+u):a+v+(d===-2?l:u)}return[Ge(r,i+(r[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),o]},H=class r{constructor({strings:e,_$litType$:t},o){let s;this.parts=[];let i=0,n=0,l=e.length-1,a=this.parts,[c,h]=Qe(e,t);if(this.el=r.createElement(c,o),C.currentNode=this.el.content,t===2||t===3){let d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=C.nextNode())!==null&&a.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(let d of s.getAttributeNames())if(d.endsWith(ye)){let m=h[n++],u=s.getAttribute(d).split(v),A=/([.?@])?(.*)/.exec(m);a.push({type:1,index:i,name:A[2],strings:u,ctor:A[1]==="."?Q:A[1]==="?"?ee:A[1]==="@"?te:w}),s.removeAttribute(d)}else d.startsWith(v)&&(a.push({type:6,index:i}),s.removeAttribute(d));if(Je.test(s.tagName)){let d=s.textContent.split(v),m=d.length-1;if(m>0){s.textContent=J?J.emptyScript:"";for(let u=0;u<m;u++)s.append(d[u],k()),C.nextNode(),a.push({type:2,index:++i});s.append(d[m],k())}}}else if(s.nodeType===8)if(s.data===ve)a.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(v,d+1))!==-1;)a.push({type:7,index:i}),d+=v.length-1}i++}}static createElement(e,t){let o=T.createElement("template");return o.innerHTML=e,o}};function P(r,e,t=r,o){if(e===$)return e;let s=o!==void 0?t._$Co?.[o]:t._$Cl,i=D(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(r),s._$AT(r,t,o)),o!==void 0?(t._$Co??=[])[o]=s:t._$Cl=s),s!==void 0&&(e=P(r,s._$AS(r,e.values),s,o)),e}var G=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:o}=this._$AD,s=(e?.creationScope??T).importNode(t,!0);C.currentNode=s;let i=C.nextNode(),n=0,l=0,a=o[0];for(;a!==void 0;){if(n===a.index){let c;a.type===2?c=new N(i,i.nextSibling,this,e):a.type===1?c=new a.ctor(i,a.name,a.strings,this,e):a.type===6&&(c=new oe(i,this,e)),this._$AV.push(c),a=o[++l]}n!==a?.index&&(i=C.nextNode(),n++)}return C.currentNode=T,s}p(e){let t=0;for(let o of this._$AV)o!==void 0&&(o.strings!==void 0?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}},N=class r{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,o,s){this.type=2,this._$AH=p,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=P(this,e,t),D(e)?e===p||e==null||e===""?(this._$AH!==p&&this._$AR(),this._$AH=p):e!==this._$AH&&e!==$&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Ze(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==p&&D(this._$AH)?this._$AA.nextSibling.data=e:this.T(T.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:o}=e,s=typeof o=="number"?this._$AC(e):(o.el===void 0&&(o.el=H.createElement(Ge(o.h,o.h[0]),this.options)),o);if(this._$AH?._$AD===s)this._$AH.p(t);else{let i=new G(s,this),n=i.u(this.options);i.p(t),this.T(n),this._$AH=i}}_$AC(e){let t=Xe.get(e.strings);return t===void 0&&Xe.set(e.strings,t=new H(e)),t}k(e){Ae(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,o,s=0;for(let i of e)s===t.length?t.push(o=new r(this.O(k()),this.O(k()),this,this.options)):o=t[s],o._$AI(i),s++;s<t.length&&(this._$AR(o&&o._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){let o=e.nextSibling;e.remove(),e=o}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},w=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,o,s,i){this.type=1,this._$AH=p,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=i,o.length>2||o[0]!==""||o[1]!==""?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=p}_$AI(e,t=this,o,s){let i=this.strings,n=!1;if(i===void 0)e=P(this,e,t,0),n=!D(e)||e!==this._$AH&&e!==$,n&&(this._$AH=e);else{let l=e,a,c;for(e=i[0],a=0;a<i.length-1;a++)c=P(this,l[o+a],t,a),c===$&&(c=this._$AH[a]),n||=!D(c)||c!==this._$AH[a],c===p?e=p:e!==p&&(e+=(c??"")+i[a+1]),this._$AH[a]=c}n&&!s&&this.j(e)}j(e){e===p?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Q=class extends w{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===p?void 0:e}},ee=class extends w{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==p)}},te=class extends w{constructor(e,t,o,s,i){super(e,t,o,s,i),this.type=5}_$AI(e,t=this){if((e=P(this,e,t,0)??p)===$)return;let o=this._$AH,s=e===p&&o!==p||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,i=e!==p&&(o===p||s);s&&this.element.removeEventListener(this.name,this,o),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},oe=class{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){P(this,e)}},et={M:ye,P:v,A:ve,C:1,L:Qe,R:G,D:Ze,V:P,I:N,H:w,N:ee,U:te,B:Q,F:oe},Ot=$e.litHtmlPolyfillSupport;Ot?.(H,N),($e.litHtmlVersions??=[]).push("3.3.1");var tt=(r,e,t)=>{let o=t?.renderBefore??e,s=o._$litPart$;if(s===void 0){let i=t?.renderBefore??null;o._$litPart$=s=new N(e.insertBefore(k(),i),i,void 0,t??{})}return s._$AI(r),s};var Ee=globalThis,b=class extends y{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=tt(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return $}};b._$litElement$=!0,b.finalized=!0,Ee.litElementHydrateSupport?.({LitElement:b});var Mt=Ee.litElementPolyfillSupport;Mt?.({LitElement:b});(Ee.litElementVersions??=[]).push("4.2.1");var re=r=>(e,t)=>{t!==void 0?t.addInitializer((()=>{customElements.define(r,e)})):customElements.define(r,e)};var{I:qo}=et,ot=r=>r===null||typeof r!="object"&&typeof r!="function";var rt=r=>r.strings===void 0;var st={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ce=r=>(...e)=>({_$litDirective$:r,values:e}),ie=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};var L=(r,e)=>{let t=r._$AN;if(t===void 0)return!1;for(let o of t)o._$AO?.(e,!1),L(o,e);return!0},ne=r=>{let e,t;do{if((e=r._$AM)===void 0)break;t=e._$AN,t.delete(r),r=e}while(t?.size===0)},it=r=>{for(let e;e=r._$AM;r=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(r))break;t.add(r),It(e)}};function Ut(r){this._$AN!==void 0?(ne(this),this._$AM=r,it(this)):this._$AM=r}function Rt(r,e=!1,t=0){let o=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(o))for(let i=t;i<o.length;i++)L(o[i],!1),ne(o[i]);else o!=null&&(L(o,!1),ne(o));else L(this,r)}var It=r=>{r.type==st.CHILD&&(r._$AP??=Rt,r._$AQ??=Ut)},ae=class extends ie{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,o){super._$AT(e,t,o),it(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(L(this,e),ne(this))}setValue(e){if(rt(this._$Ct))this._$Ct._$AI(e,this);else{let t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}};var de=class{constructor(e){this.G=e}disconnect(){this.G=void 0}reconnect(e){this.G=e}deref(){return this.G}},le=class{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??=new Promise((e=>this.Z=e))}resume(){this.Z?.(),this.Y=this.Z=void 0}};var nt=r=>!ot(r)&&typeof r.then=="function",at=1073741823,Te=class extends ae{constructor(){super(...arguments),this._$Cwt=at,this._$Cbt=[],this._$CK=new de(this),this._$CX=new le}render(...e){return e.find((t=>!nt(t)))??$}update(e,t){let o=this._$Cbt,s=o.length;this._$Cbt=t;let i=this._$CK,n=this._$CX;this.isConnected||this.disconnected();for(let l=0;l<t.length&&!(l>this._$Cwt);l++){let a=t[l];if(!nt(a))return this._$Cwt=l,a;l<s&&a===o[l]||(this._$Cwt=at,s=0,Promise.resolve(a).then((async c=>{for(;n.get();)await n.get();let h=i.deref();if(h!==void 0){let d=h._$Cbt.indexOf(a);d>-1&&d<h._$Cwt&&(h._$Cwt=d,h.setValue(c))}})))}return $}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}},dt=Ce(Te);import{lll as O}from"@typo3/core/lit-helper.js";import xe from"@typo3/core/ajax/ajax-request.js";import kt from"@typo3/backend/storage/persistent.js";import{ModuleUtility as Dt}from"@typo3/backend/module.js";import Ht from"@typo3/backend/context-menu.js";import{PageTree as Lt}from"@typo3/backend/tree/page-tree.js";import{TreeNodeCommandEnum as _,TreeNodePositionEnum as x}from"@typo3/backend/tree/tree-node.js";import{TreeToolbar as jt}from"@typo3/backend/tree/tree-toolbar.js";import{TreeModuleState as qt}from"@typo3/backend/tree/tree-module-state.js";import Pe from"@typo3/backend/modal.js";import lt from"@typo3/backend/severity.js";import{ModuleStateStorage as ut}from"@typo3/backend/storage/module-state-storage.js";import{DataTransferTypes as ce}from"@typo3/backend/enum/data-transfer-types.js";var Ar="typo3-backend-navigation-component-categorytree",ct,we,Bt;ct=[re("typo3-backend-navigation-component-categorytree-tree")];var j=class extends(Bt=Lt){constructor(){super(...arguments);this.allowNodeEdit=!0;this.allowNodeDrag=!0;this.allowNodeSorting=!0;this.mountPointPath=null}sendChangeCommand(t){let o="",s="0",i="0",n="0",l="sys_category";if(t.target)if(s=t.target.identifier,t.position===x.BEFORE){let a=this.getPreviousNode(t.target);s=(a.depth===t.target.depth?"-":"")+a.identifier,i=t.target.parentIdentifier||"0",n=t.target.storagePid||"0"}else t.position===x.AFTER?(s="-"+s,i=t.target.parentIdentifier||"0",n=t.target.storagePid||"0"):(i=s,n=t.target.storagePid||"0");if(t.command===_.NEW){let a=t;o="&data["+l+"]["+t.node.identifier+"][pid]="+encodeURIComponent(n)+"&data["+l+"]["+t.node.identifier+"][parent]="+encodeURIComponent(i)+"&data["+l+"]["+t.node.identifier+"][title]="+encodeURIComponent(a.title)}else if(t.command===_.EDIT)o="&data["+l+"]["+t.node.identifier+"][title]="+encodeURIComponent(t.title);else if(t.command===_.DELETE){let a=ut.current("web");t.node.identifier===a.identifier&&this.selectFirstNode(),o="&cmd["+l+"]["+t.node.identifier+"][delete]=1"}else o="cmd["+l+"]["+t.node.identifier+"]["+t.command+"]="+s;this.requestTreeUpdate(o).then(a=>{if(a&&a.hasErrors)this.errorNotification(a.messages);else if(t.command===_.NEW){let c=this.getParentNode(t.node);c.loaded=!1,this.loadChildren(c)}else this.refreshOrFilterTree()})}initializeDragForNode(){throw new Error("unused")}async handleNodeEdit(t,o){if(t.__loading=!0,t.identifier.startsWith("NEW")){let s=this.getPreviousNode(t),i=t.depth===s.depth?x.AFTER:x.INSIDE,n={command:_.NEW,node:t,title:o,position:i,target:s,doktype:t.doktype};await this.sendChangeCommand(n)}else{let s={command:_.EDIT,node:t,title:o};await this.sendChangeCommand(s)}t.__loading=!1}createDataTransferItemsFromNode(t){return[{type:ce.treenode,data:this.getNodeTreeIdentifier(t)},{type:ce.pages,data:JSON.stringify({records:[{identifier:t.identifier,tablename:"sys_category"}]})}]}async handleNodeAdd(t,o,s){this.updateComplete.then(()=>{this.editNode(t)})}handleNodeDelete(t){let o={node:t,command:_.DELETE};this.settings.displayDeleteConfirmation?Pe.confirm(TYPO3.lang["mess.delete.title"],TYPO3.lang["mess.delete"].replace("%s",o.node.name),lt.warning,[{text:TYPO3.lang["labels.cancel"]||"Cancel",active:!0,btnClass:"btn-default",name:"cancel"},{text:TYPO3.lang.delete||"Delete",btnClass:"btn-warning",name:"delete"}]).addEventListener("button.clicked",i=>{i.target.name==="delete"&&this.sendChangeCommand(o),Pe.dismiss()}):this.sendChangeCommand(o)}handleNodeMove(t,o,s){let i={node:t,target:o,position:s,command:_.MOVE},n="";switch(s){case x.BEFORE:n=TYPO3.lang["mess.move_before"];break;case x.AFTER:n=TYPO3.lang["mess.move_after"];break;default:n=TYPO3.lang["mess.move_into"];break}n=n.replace("%s",t.name).replace("%s",o.name);let l=Pe.confirm(TYPO3.lang.move_page,n,lt.warning,[{text:TYPO3.lang["labels.cancel"]||"Cancel",active:!0,btnClass:"btn-default",name:"cancel"},{text:TYPO3.lang["cm.copy"]||"Copy",btnClass:"btn-warning",name:"copy"},{text:TYPO3.lang["labels.move"]||"Move",btnClass:"btn-warning",name:"move"}]);l.addEventListener("button.clicked",a=>{let c=a.target;c.name==="move"?(i.command=_.MOVE,this.sendChangeCommand(i)):c.name==="copy"&&(i.command=_.COPY,this.sendChangeCommand(i)),l.hideModal()})}requestTreeUpdate(t){return new xe(top.TYPO3.settings.ajaxUrls.record_process).post(t,{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}}).then(o=>o.resolve()).catch(o=>{this.errorNotification(o),this.loadData()})}};we=z(Bt),j=Y(we,0,"EditablePageTree",ct,j),F(we,1,j);var ht,Ne,zt;ht=[re("typo3-backend-navigation-component-categorytree")];var q=class extends(zt=qt(b)){constructor(){super(...arguments);this.tree=void 0;this.mountPointPath=null;this.moduleStateType="web";this.configuration=null;this.refresh=()=>{this.tree.refreshOrFilterTree()};this.setMountPoint=t=>{this.setTemporaryMountPoint(t.detail.pageId)};this.selectFirstNode=()=>{this.tree.selectFirstNode()};this.loadContent=t=>{let o=t.detail.node;if(!o?.checked||(ut.updateWithTreeIdentifier("web",o.identifier,o.__treeIdentifier),t.detail.propagate===!1))return;let s=top.TYPO3.ModuleMenu.App,i=Dt.getFromName(s.getCurrentModule()).link,n=top.TYPO3.Backend.ContentContainer.getUrl(),a=new URL(n,window.location.origin).searchParams.get("id");i+=i.includes("?")?"&":"?";let c="category="+o.identifier;a&&(c+="&id="+a),top.TYPO3.Backend.ContentContainer.setUrl(i+c)};this.showContextMenu=t=>{let o=t.detail.node;o&&Ht.show(o.recordType,o.identifier,"tree","","",this.tree.getElementFromNode(o),t.detail.originalEvent)}}connectedCallback(){super.connectedCallback(),document.addEventListener("typo3:pagetree:refresh",this.refresh),document.addEventListener("typo3:pagetree:mountPoint",this.setMountPoint),document.addEventListener("typo3:pagetree:selectFirstNode",this.selectFirstNode)}disconnectedCallback(){document.removeEventListener("typo3:pagetree:refresh",this.refresh),document.removeEventListener("typo3:pagetree:mountPoint",this.setMountPoint),document.removeEventListener("typo3:pagetree:selectFirstNode",this.selectFirstNode),super.disconnectedCallback()}createRenderRoot(){return this}render(){return S`
      <div id="typo3-pagetree" class="tree">
      ${dt(this.renderTree(),"")}
      </div>
    `}getConfiguration(){if(this.configuration!==null)return Promise.resolve(this.configuration);let t=top.TYPO3.settings.ajaxUrls.xima_categorytree_configuration;return new xe(t).get().then(async o=>{let s=await o.resolve("json");return this.configuration=s,this.mountPointPath=s.temporaryMountPoint||null,s})}async renderTree(){let t=await this.getConfiguration();return S`
      <typo3-backend-navigation-component-categorytree-toolbar id="typo3-pagetree-toolbar" .tree="${this.tree}"></typo3-backend-navigation-component-categorytree-toolbar>
      <div id="typo3-pagetree-treeContainer" class="navigation-tree-container">
        <typo3-backend-navigation-component-categorytree-tree
            id="typo3-pagetree-tree"
            class="tree-wrapper"
            .setup=${t}
            @typo3:tree:node-selected=${this.loadContent}
            @typo3:tree:node-context=${this.showContextMenu}
            @typo3:tree:nodes-prepared=${this.selectActiveNodeInLoadedNodes}
        ></typo3-backend-navigation-component-categorytree-tree>
      </div>
    `}firstUpdated(){super.firstUpdated();let t=this.querySelector("#typo3-pagetree-tree"),o=this.querySelector("#typo3-pagetree-toolbar");t&&o&&(this.tree=t,o.tree=t)}unsetTemporaryMountPoint(){kt.unset("pageTree_temporaryMountPoint").then(()=>{this.mountPointPath=null})}renderMountPoint(){return this.mountPointPath===null?p:S`
      <div class="node-mount-point">
        <div class="node-mount-point__icon"><typo3-backend-icon identifier="actions-info-circle" size="small"></typo3-backend-icon></div>
        <div class="node-mount-point__text">${this.mountPointPath}</div>
        <div class="node-mount-point__icon mountpoint-close" @click="${()=>this.unsetTemporaryMountPoint()}" title="${O("labels.temporaryDBmount")}">
          <typo3-backend-icon identifier="actions-close" size="small"></typo3-backend-icon>
        </div>
      </div>
    `}setTemporaryMountPoint(t){new xe(this.configuration.setTemporaryMountPointUrl).post("pid="+t,{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}}).then(o=>o.resolve()).then(o=>{o&&o.hasErrors?(this.tree.errorNotification(o.message),this.tree.loadData()):this.mountPointPath=o.mountPointPath}).catch(o=>{this.tree.errorNotification(o),this.tree.loadData()})}};Ne=z(zt),q=Y(Ne,0,"PageTreeNavigationComponent",ht,q),F(Ne,1,q);var pt,Se,Ft;pt=[re("typo3-backend-navigation-component-categorytree-toolbar")];var B=class extends(Ft=jt){constructor(){super(...arguments);this._tree=null}get tree(){return this._tree}set tree(t){let o=this._tree;this._tree=t,o!==t&&this.requestUpdate("tree",o)}getTree(){if(!this.tree){let t=this.closest("typo3-backend-navigation-component-categorytree");if(t){let o=t.querySelector("#typo3-pagetree-tree");o&&(this.tree=o)}}return this.tree}firstUpdated(){super.firstUpdated(),this.getTree()}render(){return S`
      <div class="tree-toolbar">
        <div class="tree-toolbar__menu">
          <div class="tree-toolbar__search">
              <label for="toolbarSearch" class="visually-hidden">
                ${O("labels.label.searchString")}
              </label>
              <input type="search" id="toolbarSearch" class="form-control form-control-sm search-input" placeholder="${O("tree.searchTermInfo")}">
          </div>
        </div>
        <div class="tree-toolbar__submenu">
          ${(()=>{if(!this.tree||!this.tree.settings)return"";let t=this.tree.settings.doktypes;return t&&t.length?t.map(o=>S`
                  <div
                    class="tree-toolbar__menuitem tree-toolbar__drag-node"
                    title="${o.title}"
                    draggable="true"
                    data-tree-icon="${o.icon}"
                    data-node-type="${o.nodeType}"
                    aria-hidden="true"
                    @dragstart="${s=>{this.handleDragStart(s,o)}}"
                  >
                    <typo3-backend-icon identifier="${o.icon}" size="small"></typo3-backend-icon>
                  </div>
                `):""})()}
          <button
            type="button"
            class="tree-toolbar__menuitem dropdown-toggle dropdown-toggle-no-chevron float-end"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            aria-label="${O("labels.openPageTreeOptionsMenu")}"
          >
            <typo3-backend-icon identifier="actions-menu-alternative" size="small"></typo3-backend-icon>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <button class="dropdown-item" @click="${()=>this.handleRefreshTree()}">
                <span class="dropdown-item-columns">
                  <span class="dropdown-item-column dropdown-item-column-icon" aria-hidden="true">
                    <typo3-backend-icon identifier="actions-refresh" size="small"></typo3-backend-icon>
                  </span>
                  <span class="dropdown-item-column dropdown-item-column-title">
                    ${O("labels.refresh")}
                  </span>
                </span>
              </button>
            </li>
            <li>
              <button class="dropdown-item" @click="${t=>this.handleCollapseAll(t)}">
                <span class="dropdown-item-columns">
                  <span class="dropdown-item-column dropdown-item-column-icon" aria-hidden="true">
                    <typo3-backend-icon identifier="apps-pagetree-category-collapse-all" size="small"></typo3-backend-icon>
                  </span>
                  <span class="dropdown-item-column dropdown-item-column-title">
                    ${O("labels.collapse")}
                  </span>
                </span>
              </button>
            </li>
          </ul>
        </div>
      </div>
    `}handleRefreshTree(){let t=this.getTree();t&&t.refreshOrFilterTree&&t.refreshOrFilterTree()}handleCollapseAll(t){let o=this.getTree();o&&o.collapseAll&&o.collapseAll()}handleDragStart(t,o){let s=this.getTree();if(!s)return;let i={__hidden:!1,__expanded:!1,__indeterminate:!1,__loading:!1,__processed:!1,__treeDragAction:"",__treeIdentifier:"",__treeParents:[""],__parents:[""],__x:0,__y:0,deletable:!1,depth:0,editable:!0,hasChildren:!1,icon:o.icon,overlayIcon:"",identifier:"NEW"+Math.floor(Math.random()*1e9).toString(16),loaded:!1,name:"",note:"",parentIdentifier:"",prefix:"",recordType:"sys_category",suffix:"",tooltip:"",type:"PageTreeItem",doktype:o.nodeType,statusInformation:[],labels:[]};s.draggingNode=i,s.nodeDragMode=_.NEW,t.dataTransfer.clearData();let n={statusIconIdentifier:s.getNodeDragStatusIcon(),tooltipIconIdentifier:o.icon,tooltipLabel:o.title};t.dataTransfer.setData(ce.dragTooltip,JSON.stringify(n)),t.dataTransfer.setData(ce.newTreenode,JSON.stringify(i)),t.dataTransfer.effectAllowed="move"}};Se=z(Ft),B=Y(Se,0,"PageTreeToolbar",pt,B),F(Se,1,B);export{j as EditablePageTree,q as PageTreeNavigationComponent,Ar as navigationComponentName};
/*! Bundled license information:

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
lit-html/lit-html.js:
lit-element/lit-element.js:
@lit/reactive-element/decorators/custom-element.js:
@lit/reactive-element/decorators/property.js:
@lit/reactive-element/decorators/state.js:
@lit/reactive-element/decorators/event-options.js:
@lit/reactive-element/decorators/base.js:
@lit/reactive-element/decorators/query.js:
@lit/reactive-element/decorators/query-all.js:
@lit/reactive-element/decorators/query-async.js:
@lit/reactive-element/decorators/query-assigned-nodes.js:
lit-html/directive.js:
lit-html/async-directive.js:
lit-html/directives/until.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
lit-html/directives/private-async-helpers.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
