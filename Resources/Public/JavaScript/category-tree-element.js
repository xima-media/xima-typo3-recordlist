var ft=Object.create;var fe=Object.defineProperty;var gt=Object.getOwnPropertyDescriptor;var ke=(r,e)=>(e=Symbol[r])?e:Symbol.for("Symbol."+r),R=r=>{throw TypeError(r)};var _t=(r,e,t)=>e in r?fe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ue=(r,e)=>fe(r,"name",{value:e,configurable:!0});var Y=r=>[,,,ft(r?.[ke("metadata")]??null)],De=["class","method","getter","setter","accessor","field","value","get","set"],U=r=>r!==void 0&&typeof r!="function"?R("Function expected"):r,$t=(r,e,t,o,s)=>({kind:De[r],name:e,metadata:o,addInitializer:i=>t._?R("Already initialized"):s.push(U(i||null))}),yt=(r,e)=>_t(e,ke("metadata"),r[3]),V=(r,e,t,o)=>{for(var s=0,i=r[e>>1],n=i&&i.length;s<n;s++)e&1?i[s].call(t):o=i[s].call(t,o);return o},W=(r,e,t,o,s,i)=>{var n,a,l,c,h,d=e&7,f=!!(e&8),p=!!(e&16),u=d>3?r.length+1:d?f?1:2:0,E=De[d+5],F=d>3&&(r[u-1]=[]),mt=r[u]||(r[u]=[]),_=d&&(!p&&!f&&(s=s.prototype),d<5&&(d>3||!p)&&gt(d<4?s:{get[t](){return Re(this,i)},set[t](g){return Ie(this,i,g)}},t));d?p&&d<4&&Ue(i,(d>2?"set ":d>1?"get ":"")+t):Ue(s,t);for(var ue=o.length-1;ue>=0;ue--)c=$t(d,t,l={},r[3],mt),d&&(c.static=f,c.private=p,h=c.access={has:p?g=>vt(s,g):g=>t in g},d^3&&(h.get=p?g=>(d^1?Re:At)(g,s,d^4?i:_.get):g=>g[t]),d>2&&(h.set=p?(g,me)=>Ie(g,s,me,d^4?i:_.set):(g,me)=>g[t]=me)),a=(0,o[ue])(d?d<4?p?i:_[E]:d>4?void 0:{get:_.get,set:_.set}:s,c),l._=1,d^4||a===void 0?U(a)&&(d>4?F.unshift(a):d?p?i=a:_[E]=a:s=a):typeof a!="object"||a===null?R("Object expected"):(U(n=a.get)&&(_.get=n),U(n=a.set)&&(_.set=n),U(n=a.init)&&F.unshift(n));return d||yt(r,s),_&&fe(s,t,_),p?d^4?i:_:s};var ge=(r,e,t)=>e.has(r)||R("Cannot "+t),vt=(r,e)=>Object(e)!==e?R('Cannot use the "in" operator on this value'):r.has(e),Re=(r,e,t)=>(ge(r,e,"read from private field"),t?t.call(r):e.get(r));var Ie=(r,e,t,o)=>(ge(r,e,"write to private field"),o?o.call(r,t):e.set(r,t),t),At=(r,e,t)=>(ge(r,e,"access private method"),t);var K=globalThis,Z=K.ShadowRoot&&(K.ShadyCSS===void 0||K.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Le=Symbol(),He=new WeakMap,X=class{constructor(e,t,o){if(this._$cssResult$=!0,o!==Le)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(Z&&e===void 0){let o=t!==void 0&&t.length===1;o&&(e=He.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&He.set(t,e))}return e}toString(){return this.cssText}},je=r=>new X(typeof r=="string"?r:r+"",void 0,Le);var qe=(r,e)=>{if(Z)r.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(let t of e){let o=document.createElement("style"),s=K.litNonce;s!==void 0&&o.setAttribute("nonce",s),o.textContent=t.cssText,r.appendChild(o)}},_e=Z?r=>r:r=>r instanceof CSSStyleSheet?(e=>{let t="";for(let o of e.cssRules)t+=o.cssText;return je(t)})(r):r;var{is:bt,defineProperty:Et,getOwnPropertyDescriptor:Ct,getOwnPropertyNames:Tt,getOwnPropertySymbols:Pt,getPrototypeOf:St}=Object,G=globalThis,Be=G.trustedTypes,wt=Be?Be.emptyScript:"",Nt=G.reactiveElementPolyfillSupport,I=(r,e)=>r,J={toAttribute(r,e){switch(e){case Boolean:r=r?wt:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,e){let t=r;switch(e){case Boolean:t=r!==null;break;case Number:t=r===null?null:Number(r);break;case Object:case Array:try{t=JSON.parse(r)}catch{t=null}}return t}},$e=(r,e)=>!bt(r,e),ze={attribute:!0,type:String,converter:J,reflect:!1,useDefault:!1,hasChanged:$e};Symbol.metadata??=Symbol("metadata"),G.litPropertyMetadata??=new WeakMap;var v=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=ze){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){let o=Symbol(),s=this.getPropertyDescriptor(e,o,t);s!==void 0&&Et(this.prototype,e,s)}}static getPropertyDescriptor(e,t,o){let{get:s,set:i}=Ct(this.prototype,e)??{get(){return this[t]},set(n){this[t]=n}};return{get:s,set(n){let a=s?.call(this);i?.call(this,n),this.requestUpdate(e,a,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ze}static _$Ei(){if(this.hasOwnProperty(I("elementProperties")))return;let e=St(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(I("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(I("properties"))){let t=this.properties,o=[...Tt(t),...Pt(t)];for(let s of o)this.createProperty(s,t[s])}let e=this[Symbol.metadata];if(e!==null){let t=litPropertyMetadata.get(e);if(t!==void 0)for(let[o,s]of t)this.elementProperties.set(o,s)}this._$Eh=new Map;for(let[t,o]of this.elementProperties){let s=this._$Eu(t,o);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let o=new Set(e.flat(1/0).reverse());for(let s of o)t.unshift(_e(s))}else e!==void 0&&t.push(_e(e));return t}static _$Eu(e,t){let o=t.attribute;return o===!1?void 0:typeof o=="string"?o:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,t=this.constructor.elementProperties;for(let o of t.keys())this.hasOwnProperty(o)&&(e.set(o,this[o]),delete this[o]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return qe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$ET(e,t){let o=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,o);if(s!==void 0&&o.reflect===!0){let i=(o.converter?.toAttribute!==void 0?o.converter:J).toAttribute(t,o.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,t){let o=this.constructor,s=o._$Eh.get(e);if(s!==void 0&&this._$Em!==s){let i=o.getPropertyOptions(s),n=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:J;this._$Em=s;let a=n.fromAttribute(t,i.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,t,o){if(e!==void 0){let s=this.constructor,i=this[e];if(o??=s.getPropertyOptions(e),!((o.hasChanged??$e)(i,t)||o.useDefault&&o.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,o))))return;this.C(e,t,o)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:o,reflect:s,wrapped:i},n){o&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,n??t??this[e]),i!==!0||n!==void 0)||(this._$AL.has(e)||(this.hasUpdated||o||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}let o=this.constructor.elementProperties;if(o.size>0)for(let[s,i]of o){let{wrapped:n}=i,a=this[s];n!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,i,a)}}let e=!1,t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((o=>o.hostUpdate?.())),this.update(t)):this._$EM()}catch(o){throw e=!1,this._$EM(),o}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};v.elementStyles=[],v.shadowRootOptions={mode:"open"},v[I("elementProperties")]=new Map,v[I("finalized")]=new Map,Nt?.({ReactiveElement:v}),(G.reactiveElementVersions??=[]).push("2.1.1");var ve=globalThis,Q=ve.trustedTypes,Fe=Q?Q.createPolicy("lit-html",{createHTML:r=>r}):void 0,Ae="$lit$",A=`lit$${Math.random().toFixed(9).slice(2)}$`,be="?"+A,xt=`<${be}>`,P=document,D=()=>P.createComment(""),H=r=>r===null||typeof r!="object"&&typeof r!="function",Ee=Array.isArray,Ze=r=>Ee(r)||typeof r?.[Symbol.iterator]=="function",ye=`[ 	
\f\r]`,k=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ye=/-->/g,Ve=/>/g,C=RegExp(`>|${ye}(?:([^\\s"'>=/]+)(${ye}*=${ye}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),We=/'/g,Ke=/"/g,Je=/^(?:script|style|textarea|title)$/i,Ce=r=>(e,...t)=>({_$litType$:r,strings:e,values:t}),x=Ce(1),Jt=Ce(2),Gt=Ce(3),y=Symbol.for("lit-noChange"),m=Symbol.for("lit-nothing"),Xe=new WeakMap,T=P.createTreeWalker(P,129);function Ge(r,e){if(!Ee(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return Fe!==void 0?Fe.createHTML(e):e}var Qe=(r,e)=>{let t=r.length-1,o=[],s,i=e===2?"<svg>":e===3?"<math>":"",n=k;for(let a=0;a<t;a++){let l=r[a],c,h,d=-1,f=0;for(;f<l.length&&(n.lastIndex=f,h=n.exec(l),h!==null);)f=n.lastIndex,n===k?h[1]==="!--"?n=Ye:h[1]!==void 0?n=Ve:h[2]!==void 0?(Je.test(h[2])&&(s=RegExp("</"+h[2],"g")),n=C):h[3]!==void 0&&(n=C):n===C?h[0]===">"?(n=s??k,d=-1):h[1]===void 0?d=-2:(d=n.lastIndex-h[2].length,c=h[1],n=h[3]===void 0?C:h[3]==='"'?Ke:We):n===Ke||n===We?n=C:n===Ye||n===Ve?n=k:(n=C,s=void 0);let p=n===C&&r[a+1].startsWith("/>")?" ":"";i+=n===k?l+xt:d>=0?(o.push(c),l.slice(0,d)+Ae+l.slice(d)+A+p):l+A+(d===-2?a:p)}return[Ge(r,i+(r[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),o]},L=class r{constructor({strings:e,_$litType$:t},o){let s;this.parts=[];let i=0,n=0,a=e.length-1,l=this.parts,[c,h]=Qe(e,t);if(this.el=r.createElement(c,o),T.currentNode=this.el.content,t===2||t===3){let d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=T.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(let d of s.getAttributeNames())if(d.endsWith(Ae)){let f=h[n++],p=s.getAttribute(d).split(A),u=/([.?@])?(.*)/.exec(f);l.push({type:1,index:i,name:u[2],strings:p,ctor:u[1]==="."?te:u[1]==="?"?oe:u[1]==="@"?re:w}),s.removeAttribute(d)}else d.startsWith(A)&&(l.push({type:6,index:i}),s.removeAttribute(d));if(Je.test(s.tagName)){let d=s.textContent.split(A),f=d.length-1;if(f>0){s.textContent=Q?Q.emptyScript:"";for(let p=0;p<f;p++)s.append(d[p],D()),T.nextNode(),l.push({type:2,index:++i});s.append(d[f],D())}}}else if(s.nodeType===8)if(s.data===be)l.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(A,d+1))!==-1;)l.push({type:7,index:i}),d+=A.length-1}i++}}static createElement(e,t){let o=P.createElement("template");return o.innerHTML=e,o}};function S(r,e,t=r,o){if(e===y)return e;let s=o!==void 0?t._$Co?.[o]:t._$Cl,i=H(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(r),s._$AT(r,t,o)),o!==void 0?(t._$Co??=[])[o]=s:t._$Cl=s),s!==void 0&&(e=S(r,s._$AS(r,e.values),s,o)),e}var ee=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:o}=this._$AD,s=(e?.creationScope??P).importNode(t,!0);T.currentNode=s;let i=T.nextNode(),n=0,a=0,l=o[0];for(;l!==void 0;){if(n===l.index){let c;l.type===2?c=new N(i,i.nextSibling,this,e):l.type===1?c=new l.ctor(i,l.name,l.strings,this,e):l.type===6&&(c=new se(i,this,e)),this._$AV.push(c),l=o[++a]}n!==l?.index&&(i=T.nextNode(),n++)}return T.currentNode=P,s}p(e){let t=0;for(let o of this._$AV)o!==void 0&&(o.strings!==void 0?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}},N=class r{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,o,s){this.type=2,this._$AH=m,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=S(this,e,t),H(e)?e===m||e==null||e===""?(this._$AH!==m&&this._$AR(),this._$AH=m):e!==this._$AH&&e!==y&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Ze(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==m&&H(this._$AH)?this._$AA.nextSibling.data=e:this.T(P.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:o}=e,s=typeof o=="number"?this._$AC(e):(o.el===void 0&&(o.el=L.createElement(Ge(o.h,o.h[0]),this.options)),o);if(this._$AH?._$AD===s)this._$AH.p(t);else{let i=new ee(s,this),n=i.u(this.options);i.p(t),this.T(n),this._$AH=i}}_$AC(e){let t=Xe.get(e.strings);return t===void 0&&Xe.set(e.strings,t=new L(e)),t}k(e){Ee(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,o,s=0;for(let i of e)s===t.length?t.push(o=new r(this.O(D()),this.O(D()),this,this.options)):o=t[s],o._$AI(i),s++;s<t.length&&(this._$AR(o&&o._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){let o=e.nextSibling;e.remove(),e=o}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},w=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,o,s,i){this.type=1,this._$AH=m,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=i,o.length>2||o[0]!==""||o[1]!==""?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=m}_$AI(e,t=this,o,s){let i=this.strings,n=!1;if(i===void 0)e=S(this,e,t,0),n=!H(e)||e!==this._$AH&&e!==y,n&&(this._$AH=e);else{let a=e,l,c;for(e=i[0],l=0;l<i.length-1;l++)c=S(this,a[o+l],t,l),c===y&&(c=this._$AH[l]),n||=!H(c)||c!==this._$AH[l],c===m?e=m:e!==m&&(e+=(c??"")+i[l+1]),this._$AH[l]=c}n&&!s&&this.j(e)}j(e){e===m?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},te=class extends w{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===m?void 0:e}},oe=class extends w{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==m)}},re=class extends w{constructor(e,t,o,s,i){super(e,t,o,s,i),this.type=5}_$AI(e,t=this){if((e=S(this,e,t,0)??m)===y)return;let o=this._$AH,s=e===m&&o!==m||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,i=e!==m&&(o===m||s);s&&this.element.removeEventListener(this.name,this,o),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},se=class{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){S(this,e)}},et={M:Ae,P:A,A:be,C:1,L:Qe,R:ee,D:Ze,V:S,I:N,H:w,N:oe,U:re,B:te,F:se},Mt=ve.litHtmlPolyfillSupport;Mt?.(L,N),(ve.litHtmlVersions??=[]).push("3.3.1");var tt=(r,e,t)=>{let o=t?.renderBefore??e,s=o._$litPart$;if(s===void 0){let i=t?.renderBefore??null;o._$litPart$=s=new N(e.insertBefore(D(),i),i,void 0,t??{})}return s._$AI(r),s};var Te=globalThis,b=class extends v{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=tt(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return y}};b._$litElement$=!0,b.finalized=!0,Te.litElementHydrateSupport?.({LitElement:b});var Ot=Te.litElementPolyfillSupport;Ot?.({LitElement:b});(Te.litElementVersions??=[]).push("4.2.1");var ie=r=>(e,t)=>{t!==void 0?t.addInitializer((()=>{customElements.define(r,e)})):customElements.define(r,e)};var{I:qo}=et,ot=r=>r===null||typeof r!="object"&&typeof r!="function";var rt=r=>r.strings===void 0;var st={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Pe=r=>(...e)=>({_$litDirective$:r,values:e}),ae=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};var j=(r,e)=>{let t=r._$AN;if(t===void 0)return!1;for(let o of t)o._$AO?.(e,!1),j(o,e);return!0},de=r=>{let e,t;do{if((e=r._$AM)===void 0)break;t=e._$AN,t.delete(r),r=e}while(t?.size===0)},it=r=>{for(let e;e=r._$AM;r=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(r))break;t.add(r),It(e)}};function Ut(r){this._$AN!==void 0?(de(this),this._$AM=r,it(this)):this._$AM=r}function Rt(r,e=!1,t=0){let o=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(o))for(let i=t;i<o.length;i++)j(o[i],!1),de(o[i]);else o!=null&&(j(o,!1),de(o));else j(this,r)}var It=r=>{r.type==st.CHILD&&(r._$AP??=Rt,r._$AQ??=Ut)},le=class extends ae{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,o){super._$AT(e,t,o),it(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(j(this,e),de(this))}setValue(e){if(rt(this._$Ct))this._$Ct._$AI(e,this);else{let t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}};var ce=class{constructor(e){this.G=e}disconnect(){this.G=void 0}reconnect(e){this.G=e}deref(){return this.G}},he=class{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??=new Promise((e=>this.Z=e))}resume(){this.Z?.(),this.Y=this.Z=void 0}};var nt=r=>!ot(r)&&typeof r.then=="function",at=1073741823,Se=class extends le{constructor(){super(...arguments),this._$Cwt=at,this._$Cbt=[],this._$CK=new ce(this),this._$CX=new he}render(...e){return e.find((t=>!nt(t)))??y}update(e,t){let o=this._$Cbt,s=o.length;this._$Cbt=t;let i=this._$CK,n=this._$CX;this.isConnected||this.disconnected();for(let a=0;a<t.length&&!(a>this._$Cwt);a++){let l=t[a];if(!nt(l))return this._$Cwt=a,l;a<s&&l===o[a]||(this._$Cwt=at,s=0,Promise.resolve(l).then((async c=>{for(;n.get();)await n.get();let h=i.deref();if(h!==void 0){let d=h._$Cbt.indexOf(l);d>-1&&d<h._$Cwt&&(h._$Cwt=d,h.setValue(c))}})))}return y}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}},dt=Pe(Se);import{lll as O}from"@typo3/core/lit-helper.js";import Oe from"@typo3/core/ajax/ajax-request.js";import kt from"@typo3/backend/storage/persistent.js";import{ModuleUtility as Dt}from"@typo3/backend/module.js";import Ht from"@typo3/backend/context-menu.js";import{PageTree as Lt}from"@typo3/backend/tree/page-tree.js";import{TreeNodeCommandEnum as $,TreeNodePositionEnum as M}from"@typo3/backend/tree/tree-node.js";import{TreeToolbar as jt}from"@typo3/backend/tree/tree-toolbar.js";import{TreeModuleState as qt}from"@typo3/backend/tree/tree-module-state.js";import we from"@typo3/backend/modal.js";import lt from"@typo3/backend/severity.js";import{ModuleStateStorage as ut}from"@typo3/backend/storage/module-state-storage.js";import{DataTransferTypes as pe}from"@typo3/backend/enum/data-transfer-types.js";var Ar="typo3-backend-navigation-component-categorytree",ct,Ne,Bt;ct=[ie("typo3-backend-navigation-component-categorytree-tree")];var q=class extends(Bt=Lt){constructor(){super(...arguments);this.allowNodeEdit=!0;this.allowNodeDrag=!0;this.allowNodeSorting=!0;this.mountPointPath=null}sendChangeCommand(t){let o="",s="0",i="0",n="0",a=256,l="sys_category";if(t.target){s=t.target.identifier;let c=t.target.sorting||0,h=t.target.parentIdentifier||"0",f=this.nodes.filter(p=>(p.parentIdentifier||"0")===h).sort((p,u)=>(p.sorting||0)-(u.sorting||0));if(t.position===M.BEFORE){let p=this.getPreviousNode(t.target);s=(p.depth===t.target.depth?"-":"")+p.identifier,i=h,n=t.target.storagePid||"0";let u=f.filter(F=>(F.sorting||0)<c).pop(),E=u&&u.sorting||0;a=Math.floor((E+c)/2),(a<=E||a>=c)&&(a=Math.max(1,c-1))}else if(t.position===M.AFTER){s="-"+s,i=h,n=t.target.storagePid||"0";let p=f.find(u=>(u.sorting||0)>c);if(p){let u=p.sorting||0;a=Math.floor((c+u)/2),(a<=c||a>=u)&&(a=c+1)}else a=c+128}else{i=s,n=t.target.storagePid||"0";let p=this.nodes.filter(u=>u.parentIdentifier===t.target.identifier);if(p.length>0){let u=Math.min(...p.map(E=>E.sorting||0));a=Math.max(1,Math.floor(u/2))}else a=256}}if(t.command===$.NEW){let c=t;o="&data["+l+"]["+t.node.identifier+"][pid]="+encodeURIComponent(n)+"&data["+l+"]["+t.node.identifier+"][parent]="+encodeURIComponent(i)+"&data["+l+"]["+t.node.identifier+"][sorting]="+encodeURIComponent(a.toString())+"&data["+l+"]["+t.node.identifier+"][title]="+encodeURIComponent(c.title)}else if(t.command===$.EDIT)o="&data["+l+"]["+t.node.identifier+"][title]="+encodeURIComponent(t.title);else if(t.command===$.DELETE){let c=ut.current("web");t.node.identifier===c.identifier&&this.selectFirstNode(),o="&cmd["+l+"]["+t.node.identifier+"][delete]=1"}else o="cmd["+l+"]["+t.node.identifier+"]["+t.command+"]="+s;this.requestTreeUpdate(o).then(c=>{if(c&&c.hasErrors)this.errorNotification(c.messages);else if(t.command===$.NEW){let h=this.getParentNode(t.node);h.loaded=!1,this.loadChildren(h)}else this.refreshOrFilterTree()})}initializeDragForNode(){throw new Error("unused")}async handleNodeEdit(t,o){if(t.__loading=!0,t.identifier.startsWith("NEW")){let s=this.getPreviousNode(t),i=t.depth===s.depth?M.AFTER:M.INSIDE,n={command:$.NEW,node:t,title:o,position:i,target:s,doktype:t.doktype};await this.sendChangeCommand(n)}else{let s={command:$.EDIT,node:t,title:o};await this.sendChangeCommand(s)}t.__loading=!1}createDataTransferItemsFromNode(t){return[{type:pe.treenode,data:this.getNodeTreeIdentifier(t)},{type:pe.pages,data:JSON.stringify({records:[{identifier:t.identifier,tablename:"sys_category"}]})}]}async handleNodeAdd(t,o,s){this.updateComplete.then(()=>{this.editNode(t)})}handleNodeDelete(t){let o={node:t,command:$.DELETE};this.settings.displayDeleteConfirmation?we.confirm(TYPO3.lang["mess.delete.title"],TYPO3.lang["mess.delete"].replace("%s",o.node.name),lt.warning,[{text:TYPO3.lang["labels.cancel"]||"Cancel",active:!0,btnClass:"btn-default",name:"cancel"},{text:TYPO3.lang.delete||"Delete",btnClass:"btn-warning",name:"delete"}]).addEventListener("button.clicked",i=>{i.target.name==="delete"&&this.sendChangeCommand(o),we.dismiss()}):this.sendChangeCommand(o)}handleNodeMove(t,o,s){let i={node:t,target:o,position:s,command:$.MOVE},n="";switch(s){case M.BEFORE:n=TYPO3.lang["mess.move_before"];break;case M.AFTER:n=TYPO3.lang["mess.move_after"];break;default:n=TYPO3.lang["mess.move_into"];break}n=n.replace("%s",t.name).replace("%s",o.name);let a=we.confirm(TYPO3.lang.move_page,n,lt.warning,[{text:TYPO3.lang["labels.cancel"]||"Cancel",active:!0,btnClass:"btn-default",name:"cancel"},{text:TYPO3.lang["cm.copy"]||"Copy",btnClass:"btn-warning",name:"copy"},{text:TYPO3.lang["labels.move"]||"Move",btnClass:"btn-warning",name:"move"}]);a.addEventListener("button.clicked",l=>{let c=l.target;c.name==="move"?(i.command=$.MOVE,this.sendChangeCommand(i)):c.name==="copy"&&(i.command=$.COPY,this.sendChangeCommand(i)),a.hideModal()})}requestTreeUpdate(t){return new Oe(top.TYPO3.settings.ajaxUrls.record_process).post(t,{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}}).then(o=>o.resolve()).catch(o=>{this.errorNotification(o),this.loadData()})}};Ne=Y(Bt),q=W(Ne,0,"EditablePageTree",ct,q),V(Ne,1,q);var ht,xe,zt;ht=[ie("typo3-backend-navigation-component-categorytree")];var B=class extends(zt=qt(b)){constructor(){super(...arguments);this.tree=void 0;this.mountPointPath=null;this.moduleStateType="web";this.configuration=null;this.refresh=()=>{this.tree.refreshOrFilterTree()};this.setMountPoint=t=>{this.setTemporaryMountPoint(t.detail.pageId)};this.selectFirstNode=()=>{this.tree.selectFirstNode()};this.loadContent=t=>{let o=t.detail.node;if(!o?.checked||(ut.updateWithTreeIdentifier("web",o.identifier,o.__treeIdentifier),t.detail.propagate===!1))return;let s=top.TYPO3.ModuleMenu.App,i=Dt.getFromName(s.getCurrentModule()).link,n=top.TYPO3.Backend.ContentContainer.getUrl(),l=new URL(n,window.location.origin).searchParams.get("id");i+=i.includes("?")?"&":"?";let c="category="+o.identifier;l&&(c+="&id="+l),top.TYPO3.Backend.ContentContainer.setUrl(i+c)};this.showContextMenu=t=>{let o=t.detail.node;o&&Ht.show(o.recordType,o.identifier,"tree","","",this.tree.getElementFromNode(o),t.detail.originalEvent)}}connectedCallback(){super.connectedCallback(),document.addEventListener("typo3:pagetree:refresh",this.refresh),document.addEventListener("typo3:pagetree:mountPoint",this.setMountPoint),document.addEventListener("typo3:pagetree:selectFirstNode",this.selectFirstNode)}disconnectedCallback(){document.removeEventListener("typo3:pagetree:refresh",this.refresh),document.removeEventListener("typo3:pagetree:mountPoint",this.setMountPoint),document.removeEventListener("typo3:pagetree:selectFirstNode",this.selectFirstNode),super.disconnectedCallback()}createRenderRoot(){return this}render(){return x`
      <div id="typo3-pagetree" class="tree">
      ${dt(this.renderTree(),"")}
      </div>
    `}getConfiguration(){if(this.configuration!==null)return Promise.resolve(this.configuration);let t=top.TYPO3.settings.ajaxUrls.xima_categorytree_configuration;return new Oe(t).get().then(async o=>{let s=await o.resolve("json");return this.configuration=s,this.mountPointPath=s.temporaryMountPoint||null,s})}async renderTree(){let t=await this.getConfiguration();return x`
      <typo3-backend-navigation-component-categorytree-toolbar id="typo3-pagetree-toolbar" .tree="${this.tree}"></typo3-backend-navigation-component-categorytree-toolbar>
      <div id="typo3-pagetree-treeContainer" class="navigation-tree-container">
        <typo3-backend-navigation-component-categorytree-tree
            id="typo3-pagetree-tree"
            class="tree-wrapper"
            .setup=${t}
            @typo3:tree:node-selected=${this.loadContent}
            @typo3:tree:node-context=${this.showContextMenu}
            @typo3:tree:nodes-prepared=${this.selectActiveNodeInLoadedNodes}
        ></typo3-backend-navigation-component-categorytree-tree>
      </div>
    `}firstUpdated(){super.firstUpdated();let t=this.querySelector("#typo3-pagetree-tree"),o=this.querySelector("#typo3-pagetree-toolbar");t&&o&&(this.tree=t,o.tree=t)}unsetTemporaryMountPoint(){kt.unset("pageTree_temporaryMountPoint").then(()=>{this.mountPointPath=null})}renderMountPoint(){return this.mountPointPath===null?m:x`
      <div class="node-mount-point">
        <div class="node-mount-point__icon"><typo3-backend-icon identifier="actions-info-circle" size="small"></typo3-backend-icon></div>
        <div class="node-mount-point__text">${this.mountPointPath}</div>
        <div class="node-mount-point__icon mountpoint-close" @click="${()=>this.unsetTemporaryMountPoint()}" title="${O("labels.temporaryDBmount")}">
          <typo3-backend-icon identifier="actions-close" size="small"></typo3-backend-icon>
        </div>
      </div>
    `}setTemporaryMountPoint(t){new Oe(this.configuration.setTemporaryMountPointUrl).post("pid="+t,{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}}).then(o=>o.resolve()).then(o=>{o&&o.hasErrors?(this.tree.errorNotification(o.message),this.tree.loadData()):this.mountPointPath=o.mountPointPath}).catch(o=>{this.tree.errorNotification(o),this.tree.loadData()})}};xe=Y(zt),B=W(xe,0,"PageTreeNavigationComponent",ht,B),V(xe,1,B);var pt,Me,Ft;pt=[ie("typo3-backend-navigation-component-categorytree-toolbar")];var z=class extends(Ft=jt){constructor(){super(...arguments);this._tree=null}get tree(){return this._tree}set tree(t){let o=this._tree;this._tree=t,o!==t&&this.requestUpdate("tree",o)}getTree(){if(!this.tree){let t=this.closest("typo3-backend-navigation-component-categorytree");if(t){let o=t.querySelector("#typo3-pagetree-tree");o&&(this.tree=o)}}return this.tree}firstUpdated(){super.firstUpdated(),this.getTree()}render(){return x`
      <div class="tree-toolbar">
        <div class="tree-toolbar__menu">
          <div class="tree-toolbar__search">
              <label for="toolbarSearch" class="visually-hidden">
                ${O("labels.label.searchString")}
              </label>
              <input type="search" id="toolbarSearch" class="form-control form-control-sm search-input" placeholder="${O("tree.searchTermInfo")}">
          </div>
        </div>
        <div class="tree-toolbar__submenu">
          ${(()=>{if(!this.tree||!this.tree.settings)return"";let t=this.tree.settings.doktypes;return t&&t.length?t.map(o=>x`
                  <div
                    class="tree-toolbar__menuitem tree-toolbar__drag-node"
                    title="${o.title}"
                    draggable="true"
                    data-tree-icon="${o.icon}"
                    data-node-type="${o.nodeType}"
                    aria-hidden="true"
                    @dragstart="${s=>{this.handleDragStart(s,o)}}"
                  >
                    <typo3-backend-icon identifier="${o.icon}" size="small"></typo3-backend-icon>
                  </div>
                `):""})()}
          <button
            type="button"
            class="tree-toolbar__menuitem dropdown-toggle dropdown-toggle-no-chevron float-end"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            aria-label="${O("labels.openPageTreeOptionsMenu")}"
          >
            <typo3-backend-icon identifier="actions-menu-alternative" size="small"></typo3-backend-icon>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <button class="dropdown-item" @click="${()=>this.handleRefreshTree()}">
                <span class="dropdown-item-columns">
                  <span class="dropdown-item-column dropdown-item-column-icon" aria-hidden="true">
                    <typo3-backend-icon identifier="actions-refresh" size="small"></typo3-backend-icon>
                  </span>
                  <span class="dropdown-item-column dropdown-item-column-title">
                    ${O("labels.refresh")}
                  </span>
                </span>
              </button>
            </li>
            <li>
              <button class="dropdown-item" @click="${t=>this.handleCollapseAll(t)}">
                <span class="dropdown-item-columns">
                  <span class="dropdown-item-column dropdown-item-column-icon" aria-hidden="true">
                    <typo3-backend-icon identifier="apps-pagetree-category-collapse-all" size="small"></typo3-backend-icon>
                  </span>
                  <span class="dropdown-item-column dropdown-item-column-title">
                    ${O("labels.collapse")}
                  </span>
                </span>
              </button>
            </li>
          </ul>
        </div>
      </div>
    `}handleRefreshTree(){let t=this.getTree();t&&t.refreshOrFilterTree&&t.refreshOrFilterTree()}handleCollapseAll(t){let o=this.getTree();o&&o.collapseAll&&o.collapseAll()}handleDragStart(t,o){let s=this.getTree();if(!s)return;let i={__hidden:!1,__expanded:!1,__indeterminate:!1,__loading:!1,__processed:!1,__treeDragAction:"",__treeIdentifier:"",__treeParents:[""],__parents:[""],__x:0,__y:0,deletable:!1,depth:0,editable:!0,hasChildren:!1,icon:o.icon,overlayIcon:"",identifier:"NEW"+Math.floor(Math.random()*1e9).toString(16),loaded:!1,name:"",note:"",parentIdentifier:"",prefix:"",recordType:"sys_category",suffix:"",tooltip:"",type:"PageTreeItem",doktype:o.nodeType,statusInformation:[],labels:[]};s.draggingNode=i,s.nodeDragMode=$.NEW,t.dataTransfer.clearData();let n={statusIconIdentifier:s.getNodeDragStatusIcon(),tooltipIconIdentifier:o.icon,tooltipLabel:o.title};t.dataTransfer.setData(pe.dragTooltip,JSON.stringify(n)),t.dataTransfer.setData(pe.newTreenode,JSON.stringify(i)),t.dataTransfer.effectAllowed="move"}};Me=Y(Ft),z=W(Me,0,"PageTreeToolbar",pt,z),V(Me,1,z);export{q as EditablePageTree,B as PageTreeNavigationComponent,Ar as navigationComponentName};
/*! Bundled license information:

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
lit-html/lit-html.js:
lit-element/lit-element.js:
@lit/reactive-element/decorators/custom-element.js:
@lit/reactive-element/decorators/property.js:
@lit/reactive-element/decorators/state.js:
@lit/reactive-element/decorators/event-options.js:
@lit/reactive-element/decorators/base.js:
@lit/reactive-element/decorators/query.js:
@lit/reactive-element/decorators/query-all.js:
@lit/reactive-element/decorators/query-async.js:
@lit/reactive-element/decorators/query-assigned-nodes.js:
lit-html/directive.js:
lit-html/async-directive.js:
lit-html/directives/until.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
lit-html/directives/private-async-helpers.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
